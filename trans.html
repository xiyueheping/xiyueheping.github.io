<!doctype html>
<head>
<meta charset="utf-8"/>
<style type="text/css">
    body{
        padding: 0px;
        margin: 3px;
    }

 #from{
        width: 587px;
        height: 230px;
        
        border: 1px solid #5a5a5a;
        color: #333333;
        font-size: 16px;
        resize: none;
        background-color: #F5FFFA ;
        display: block;
       }
  
 #to{
        width: 587px;
        height: 230px;
        
        border: 1px solid #5a5a5a;
        color: #333333;
        font-size: 16px;
        resize: none;
        background-color: #FFF5EE ;
       }

</style>
</head>
<body>
<textarea id="from" name="word" onkeyup="qingkong(event)" placeholder="输入待翻译文本"></textarea>
<textarea id="to" name="word"  style=""></textarea>
<script type="text/javascript" src="js/jquery-3.2.0.js"></script>
<script src="js/md5.js"></script>
<script type="text/javascript">
String.prototype.Trim = function(){  

                     return this.replace(/(^\s*)|(\s*$)/g, "");

}

//如果按下删除键并且文本框中无内容 就清空翻译框信息
function qingkong(e){
     
      if((e.keyCode||e.which)==8){
                            // alert(e.keyCode)
                            // alert(document.getElementById('from').value.Trim().length)
                            if(document.getElementById('from').value.Trim().length == 0){
                                        document.getElementById('to').value = '';
                            }
                      }
}



//按下回车键触发翻译函数
document.getElementById('from').onkeydown = function(e){

                        //如果按的是回车键执行Ajax函数
                        if((e.keyCode||e.which)==13){
                          
                                     var appid = '20190209000264918';
                                     var key = 'Xtr_foZD_pgeVvK2_CMK';
                                     var salt = (new Date).getTime();
                                     var query = document.getElementById('from').value.Trim();
                                     var str1 = appid + query + salt +key;
                                     var sign = MD5(str1);
                                     
                                     //如果文本框没有内容或只有空格就不翻译了
                                     if(query.length == 0){
                                            console.log('无效数据');
                                            return;
                                     }
                                     document.getElementById('to').value = '正在加载中...';
                                     $.ajax({
                                         url: 'http://api.fanyi.baidu.com/api/trans/vip/translate',
                                         type: 'get',
                                         dataType: 'jsonp',
                                         data: {
                                             q: query,
                                             appid: appid,
                                             salt: salt,
                                             from: 'auto',
                                             to: 'auto',
                                             sign: sign
                                         },
                                         success: function (data) {
                                             console.log(data.trans_result[0].dst);
                                             document.getElementById('to').value = data.trans_result[0].dst;
                                         } 
                                     });
            
                      }
                     
                      
                     
}






           





</script>
</body>